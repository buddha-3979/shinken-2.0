#cai dat va kiem tra usb de gui sms
https://github.com/ducnc/caidat-tools-sms-usb3g-ubuntu

#cau hinh shinken
cat /etc/shinken/hosts/test.cfg
define host{
    use                     generic-host
    host_name               test
    address                 10.145.34.131
    contacts                admin
    notification_interval          30
    notification_period            24x7
    notification_options           d,u,r
    notifications_enabled   1
    check_command       check_host_alive
#   _SNMPCOMMUNITY  public
        }


cat /etc/shinken/contacts/admin.cfg
# This is a default admin
# CHANGE ITS PASSWORD!
define contact{
    use             generic-contact
    contact_name    admin
    email           nguyencongduc3112@gmail.com
    password        admin
    host_notifications_enabled      1
    service_notifications_enabled   1
    can_submit_commands             1
    notificationways                email,sms
    is_admin        1
}

cat /etc/shinken/notificationways/sms.cfg
# This is how emails are sent, 24x7 way.
define notificationway{
       notificationway_name            sms
       service_notification_period     24x7
       host_notification_period        24x7
       service_notification_options    c,w,r
       host_notification_options       d,u,r,f,s
#       service_notification_commands   send-sms ; send service notifications via email
       host_notification_commands      send-sms-host-alert    ; send host notifications via email
}

cat /etc/shinken/commands/send-sms.cfg
## Notify Host by Email
define command {
    command_name    send-sms-host-alert
    command_line    $PLUGINSDIR$/send-sms-host.sh $NOTIFICATIONTYPE$ $HOSTNAME$ $HOSTADDRESS$ $HOSTSTATE$ $DATE$ $TIME$ $CONTACTPAGER$
}

cat /var/lib/shinken/libexec/send-sms-host.sh
	#!/bin/bash

	NOTIFICATIONTYPE=$1
	HOSTNAME=$2
	HOSTADDRESS=$3
	HOSTSTATE=$4
	DATE=$5
	TIME=$6
	NUMBER=$7

	textesms="Shinken Notification    Type:$NOTIFICATIONTYPE    Host: $HOSTNAME    Address: $HOSTADDRESS     State: $HOSTSTATE    Date/Time: $DATE $TIME"
	sleep $((RANDOM%60+1))
	gsmsendsms -d /dev/ttyUSB0 -b 19200 $NUMBER "$textesms"
	#echo $NUMBER "$textesms"
	exit 0

chmod +x /var/lib/shinken/libexec/send-sms-host.sh
	
adduser shinken  dialout

/etc/init.d/shinken restart
